"use strict";
/**
 * Structured Logger
 * Agent 시스템을 위한 구조화된 로깅
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.logger = exports.Logger = exports.LogLevel = void 0;
exports.createAgentLogger = createAgentLogger;
var LogLevel;
(function (LogLevel) {
    LogLevel[LogLevel["DEBUG"] = 0] = "DEBUG";
    LogLevel[LogLevel["INFO"] = 1] = "INFO";
    LogLevel[LogLevel["WARN"] = 2] = "WARN";
    LogLevel[LogLevel["ERROR"] = 3] = "ERROR";
})(LogLevel || (exports.LogLevel = LogLevel = {}));
class Logger {
    constructor(options = {}) {
        this.buffer = [];
        this.options = {
            level: LogLevel.INFO,
            enableConsole: true,
            enableBuffer: false,
            maxBufferSize: 1000,
            ...options
        };
    }
    /**
     * Child logger 생성 (Agent별 컨텍스트)
     */
    child(context) {
        const childLogger = new Logger({
            ...this.options,
            prefix: context.prefix || this.options.prefix
        });
        childLogger.buffer = this.buffer; // 버퍼 공유
        return Object.assign(childLogger, {
            defaultContext: context
        });
    }
    debug(message, data) {
        this.log(LogLevel.DEBUG, message, data);
    }
    info(message, data) {
        this.log(LogLevel.INFO, message, data);
    }
    warn(message, data) {
        this.log(LogLevel.WARN, message, data);
    }
    error(message, data) {
        this.log(LogLevel.ERROR, message, data);
    }
    /**
     * 로그 기록
     */
    log(level, message, data) {
        if (level < this.options.level)
            return;
        const entry = {
            timestamp: new Date().toISOString(),
            level,
            message: this.options.prefix ? `[${this.options.prefix}] ${message}` : message,
            data
        };
        // Console 출력
        if (this.options.enableConsole) {
            this.writeToConsole(entry);
        }
        // 버퍼 저장
        if (this.options.enableBuffer) {
            this.buffer.push(entry);
            if (this.buffer.length > (this.options.maxBufferSize || 1000)) {
                this.buffer.shift();
            }
        }
    }
    /**
     * 콘솔 출력
     */
    writeToConsole(entry) {
        const levelStr = LogLevel[entry.level].padEnd(5);
        const time = entry.timestamp.split('T')[1].split('.')[0];
        const prefix = `[${time}] ${levelStr}`;
        const msg = `${prefix} ${entry.message}`;
        switch (entry.level) {
            case LogLevel.DEBUG:
                console.debug(msg, entry.data || '');
                break;
            case LogLevel.INFO:
                console.info(msg, entry.data || '');
                break;
            case LogLevel.WARN:
                console.warn(msg, entry.data || '');
                break;
            case LogLevel.ERROR:
                console.error(msg, entry.data || '');
                break;
        }
    }
    /**
     * 버퍼 조회
     */
    getBuffer() {
        return [...this.buffer];
    }
    /**
     * 버퍼 클리어
     */
    clearBuffer() {
        this.buffer = [];
    }
    /**
     * 로그 레벨 설정
     */
    setLevel(level) {
        this.options.level = level;
    }
}
exports.Logger = Logger;
// 기본 로거 인스턴스
exports.logger = new Logger({
    level: LogLevel.INFO,
    enableConsole: true,
    enableBuffer: true
});
// Agent별 로거 생성 헬퍼
function createAgentLogger(role, sessionId) {
    return exports.logger.child({
        agent: role,
        sessionId,
        prefix: role.toUpperCase()
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL2xvZ2dlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOzs7QUEySkgsOENBTUM7QUE3SkQsSUFBWSxRQUtYO0FBTEQsV0FBWSxRQUFRO0lBQ2xCLHlDQUFTLENBQUE7SUFDVCx1Q0FBUSxDQUFBO0lBQ1IsdUNBQVEsQ0FBQTtJQUNSLHlDQUFTLENBQUE7QUFDWCxDQUFDLEVBTFcsUUFBUSx3QkFBUixRQUFRLFFBS25CO0FBbUJELE1BQWEsTUFBTTtJQUlqQixZQUFZLFVBQWtDLEVBQUU7UUFGeEMsV0FBTSxHQUFlLEVBQUUsQ0FBQztRQUc5QixJQUFJLENBQUMsT0FBTyxHQUFHO1lBQ2IsS0FBSyxFQUFFLFFBQVEsQ0FBQyxJQUFJO1lBQ3BCLGFBQWEsRUFBRSxJQUFJO1lBQ25CLFlBQVksRUFBRSxLQUFLO1lBQ25CLGFBQWEsRUFBRSxJQUFJO1lBQ25CLEdBQUcsT0FBTztTQUNYLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsT0FBbUU7UUFDdkUsTUFBTSxXQUFXLEdBQUcsSUFBSSxNQUFNLENBQUM7WUFDN0IsR0FBRyxJQUFJLENBQUMsT0FBTztZQUNmLE1BQU0sRUFBRSxPQUFPLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTTtTQUM5QyxDQUFDLENBQUM7UUFDSCxXQUFXLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRO1FBQzFDLE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUU7WUFDaEMsY0FBYyxFQUFFLE9BQU87U0FDeEIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELEtBQUssQ0FBQyxPQUFlLEVBQUUsSUFBVTtRQUMvQixJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxD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T0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQztnQkFDckMsTUFBTTtRQUNWLENBQUM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxTQUFTO1FBQ1AsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFFRDs7T0FFRztJQUNILFdBQVc7UUFDVCxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztJQUNuQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxRQUFRLENBQUMsS0FBZTtRQUN0QixJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDN0IsQ0FBQztDQUNGO0FBckhELHdCQXFIQztBQUVELGFBQWE7QUFDQSxRQUFBLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQztJQUMvQixLQUFLLEVBQUUsUUFBUSxDQUFDLElBQUk7SUFDcEIsYUFBYSxFQUFFLElBQUk7SUFDbkIsWUFBWSxFQUFFLElBQUk7Q0FDbkIsQ0FBQyxDQUFDO0FBRUgsa0JBQWtCO0FBQ2xCLFNBQWdCLGlCQUFpQixDQUFDLElBQWUsRUFBRSxTQUFrQjtJQUNuRSxPQUFPLGNBQU0sQ0FBQyxLQUFLLENBQUM7UUFDbEIsS0FBSyxFQUFFLElBQUk7UUFDWCxTQUFTO1FBQ1QsTUFBTSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUU7S0FDM0IsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBTdHJ1Y3R1cmVkIExvZ2dlclxyXG4gKiBBZ2VudCDsi5zsiqTthZzsnYQg7JyE7ZWcIOq1rOyhsO2ZlOuQnCDroZzquYVcclxuICovXHJcblxyXG5pbXBvcnQgeyBBZ2VudFJvbGUgfSBmcm9tICcuLi90eXBlcy9hZ2VudCc7XHJcblxyXG5leHBvcnQgZW51bSBMb2dMZXZlbCB7XHJcbiAgREVCVUcgPSAwLFxyXG4gIElORk8gPSAxLFxyXG4gIFdBUk4gPSAyLFxyXG4gIEVSUk9SID0gM1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExvZ0VudHJ5IHtcclxuICB0aW1lc3RhbXA6IHN0cmluZztcclxuICBsZXZlbDogTG9nTGV2ZWw7XHJcbiAgYWdlbnQ/OiBBZ2VudFJvbGU7XHJcbiAgc2Vzc2lvbklkPzogc3RyaW5nO1xyXG4gIG1lc3NhZ2U6IHN0cmluZztcclxuICBkYXRhPzogYW55O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExvZ2dlck9wdGlvbnMge1xyXG4gIGxldmVsOiBMb2dMZXZlbDtcclxuICBwcmVmaXg/OiBzdHJpbmc7XHJcbiAgZW5hYmxlQ29uc29sZT86IGJvb2xlYW47XHJcbiAgZW5hYmxlQnVmZmVyPzogYm9vbGVhbjtcclxuICBtYXhCdWZmZXJTaXplPzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcclxuICBwcml2YXRlIG9wdGlvbnM6IExvZ2dlck9wdGlvbnM7XHJcbiAgcHJpdmF0ZSBidWZmZXI6IExvZ0VudHJ5W10gPSBbXTtcclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9uczogUGFydGlhbDxMb2dnZXJPcHRpb25zPiA9IHt9KSB7XHJcbiAgICB0aGlzLm9wdGlvbnMgPSB7XHJcbiAgICAgIGxldmVsOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgICBlbmFibGVDb25zb2xlOiB0cnVlLFxyXG4gICAgICBlbmFibGVCdWZmZXI6IGZhbHNlLFxyXG4gICAgICBtYXhCdWZmZXJTaXplOiAxMDAwLFxyXG4gICAgICAuLi5vcHRpb25zXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hpbGQgbG9nZ2VyIOyDneyEsSAoQWdlbnTrs4Qg7Luo7YWN7Iqk7Yq4KVxyXG4gICAqL1xyXG4gIGNoaWxkKGNvbnRleHQ6IHsgYWdlbnQ/OiBBZ2VudFJvbGU7IHNlc3Npb25JZD86IHN0cmluZzsgcHJlZml4Pzogc3RyaW5nIH0pOiBMb2dnZXIge1xyXG4gICAgY29uc3QgY2hpbGRMb2dnZXIgPSBuZXcgTG9nZ2VyKHtcclxuICAgICAgLi4udGhpcy5vcHRpb25zLFxyXG4gICAgICBwcmVmaXg6IGNvbnRleHQucHJlZml4IHx8IHRoaXMub3B0aW9ucy5wcmVmaXhcclxuICAgIH0pO1xyXG4gICAgY2hpbGRMb2dnZXIuYnVmZmVyID0gdGhpcy5idWZmZXI7IC8vIOuyhO2NvCDqs7XsnKBcclxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGNoaWxkTG9nZ2VyLCB7XHJcbiAgICAgIGRlZmF1bHRDb250ZXh0OiBjb250ZXh0XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5sb2coTG9nTGV2ZWwuREVCVUcsIG1lc3NhZ2UsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMubG9nKExvZ0xldmVsLklORk8sIG1lc3NhZ2UsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgd2FybihtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMubG9nKExvZ0xldmVsLldBUk4sIG1lc3NhZ2UsIGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBkYXRhPzogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLmxvZyhMb2dMZXZlbC5FUlJPUiwgbWVzc2FnZSwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDroZzqt7gg6riw66GdXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBsb2cobGV2ZWw6IExvZ0xldmVsLCBtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpOiB2b2lkIHtcclxuICAgIGlmIChsZXZlbCA8IHRoaXMub3B0aW9ucy5sZXZlbCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGVudHJ5OiBMb2dFbnRyeSA9IHtcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIGxldmVsLFxyXG4gICAgICBtZXNzYWdlOiB0aGlzLm9wdGlvbnMucHJlZml4ID8gYFske3RoaXMub3B0aW9ucy5wcmVmaXh9XSAke21lc3NhZ2V9YCA6IG1lc3NhZ2UsXHJcbiAgICAgIGRhdGFcclxuICAgIH07XHJcblxyXG4gICAgLy8gQ29uc29sZSDstpzroKVcclxuICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxlQ29uc29sZSkge1xyXG4gICAgICB0aGlzLndyaXRlVG9Db25zb2xlKGVudHJ5KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDrsoTtjbwg7KCA7J6lXHJcbiAgICBpZiAodGhpcy5vcHRpb25zLmVuYWJsZUJ1ZmZlcikge1xyXG4gICAgICB0aGlzLmJ1ZmZlci5wdXNoKGVudHJ5KTtcclxuICAgICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA+ICh0aGlzLm9wdGlvbnMubWF4QnVmZmVyU2l6ZSB8fCAxMDAwKSkge1xyXG4gICAgICAgIHRoaXMuYnVmZmVyLnNoaWZ0KCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOy9mOyGlCDstpzroKVcclxuICAgKi9cclxuICBwcml2YXRlIHdyaXRlVG9Db25zb2xlKGVudHJ5OiBMb2dFbnRyeSk6IHZvaWQge1xyXG4gICAgY29uc3QgbGV2ZWxTdHIgPSBMb2dMZXZlbFtlbnRyeS5sZXZlbF0ucGFkRW5kKDUpO1xyXG4gICAgY29uc3QgdGltZSA9IGVudHJ5LnRpbWVzdGFtcC5zcGxpdCgnVCcpWzFdLnNwbGl0KCcuJylbMF07XHJcbiAgICBjb25zdCBwcmVmaXggPSBgWyR7dGltZX1dICR7bGV2ZWxTdHJ9YDtcclxuXHJcbiAgICBjb25zdCBtc2cgPSBgJHtwcmVmaXh9ICR7ZW50cnkubWVzc2FnZX1gO1xyXG5cclxuICAgIHN3aXRjaCAoZW50cnkubGV2ZWwpIHtcclxuICAgICAgY2FzZSBMb2dMZXZlbC5ERUJVRzpcclxuICAgICAgICBjb25zb2xlLmRlYnVnKG1zZywgZW50cnkuZGF0YSB8fCAnJyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgTG9nTGV2ZWwuSU5GTzpcclxuICAgICAgICBjb25zb2xlLmluZm8obXNnLCBlbnRyeS5kYXRhIHx8ICcnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxyXG4gICAgICAgIGNvbnNvbGUud2Fybihtc2csIGVudHJ5LmRhdGEgfHwgJycpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIExvZ0xldmVsLkVSUk9SOlxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnLCBlbnRyeS5kYXRhIHx8ICcnKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuyhO2NvCDsobDtmoxcclxuICAgKi9cclxuICBnZXRCdWZmZXIoKTogTG9nRW50cnlbXSB7XHJcbiAgICByZXR1cm4gWy4uLnRoaXMuYnVmZmVyXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOuyhO2NvCDtgbTrpqzslrRcclxuICAgKi9cclxuICBjbGVhckJ1ZmZlcigpOiB2b2lkIHtcclxuICAgIHRoaXMuYnVmZmVyID0gW107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDroZzqt7gg66CI67KoIOyEpOyglVxyXG4gICAqL1xyXG4gIHNldExldmVsKGxldmVsOiBMb2dMZXZlbCk6IHZvaWQge1xyXG4gICAgdGhpcy5vcHRpb25zLmxldmVsID0gbGV2ZWw7XHJcbiAgfVxyXG59XHJcblxyXG4vLyDquLDrs7gg66Gc6rGwIOyduOyKpO2EtOyKpFxyXG5leHBvcnQgY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcih7XHJcbiAgbGV2ZWw6IExvZ0xldmVsLklORk8sXHJcbiAgZW5hYmxlQ29uc29sZTogdHJ1ZSxcclxuICBlbmFibGVCdWZmZXI6IHRydWVcclxufSk7XHJcblxyXG4vLyBBZ2VudOuzhCDroZzqsbAg7IOd7ISxIO2XrO2NvFxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWdlbnRMb2dnZXIocm9sZTogQWdlbnRSb2xlLCBzZXNzaW9uSWQ/OiBzdHJpbmcpOiBMb2dnZXIge1xyXG4gIHJldHVybiBsb2dnZXIuY2hpbGQoe1xyXG4gICAgYWdlbnQ6IHJvbGUsXHJcbiAgICBzZXNzaW9uSWQsXHJcbiAgICBwcmVmaXg6IHJvbGUudG9VcHBlckNhc2UoKVxyXG4gIH0pO1xyXG59XHJcbiJdfQ==